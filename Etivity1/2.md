# Esercizio 2

## Domanda

Progettare degli algoritmi in pseudo codice MapReduce che prende in input una matrice M nxn e un vettore v di dimensione n e produce come output il vettore x di lunghezza n, il cui i-th elemento ð‘¥ð‘– Ã¨ dato da:

---

## Svolgimento
```
// FASE MAP
Map(key, value):
    // Input: key = (i,j), value = m_{i,j} (elemento della matrice)
    // oppure: key = j, value = v_j (elemento del vettore)
    
    if input is matrix element:
        // Per ogni elemento m_{i,j} della matrice
        emit(key: i, value: (j, m_{i,j}, "matrix"))
    
    if input is vector element:
        // Per ogni elemento v_j del vettore
        for i = 1 to n:
            emit(key: i, value: (j, v_j, "vector"))

// FASE REDUCE
Reduce(key, values):
    // key = i (indice della riga)
    // values = lista di coppie (j, valore, tipo)
    
    // Separa elementi della matrice ed elementi del vettore
    matrix_elements = {}  // dizionario j -> m_{i,j}
    vector_elements = {}  // dizionario j -> v_j
    
    for (j, value, type) in values:
        if type == "matrix":
            matrix_elements[j] = value
        else if type == "vector":
            vector_elements[j] = value
    
    // Calcola x_i = somma di m_{i,j} * v_j per tutti i j
    x_i = 0
    for j = 1 to n:
        if j in matrix_elements AND j in vector_elements:
            x_i = x_i + matrix_elements[j] * vector_elements[j]
    
    emit(key: i, value: x_i)
```